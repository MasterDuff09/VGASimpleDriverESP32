#include "vga_handler.h"
#include "esp_timer.h"
#include "esp_task_wdt.h"

//static const char *VGA_TASK_TAG = "VGA_TASK";
static uint16_t last_delay = 0;
uint16_t write_on_y = 0;
/*
const unsigned char Font8x8Pixels[] = {
28, 28, 28, 28, 28, 28, 28, 28,
28, 28, 28, 28, 28, 28, 28, 28,
28, 28, 28, 28, 28, 28, 28, 28,
28, 28, 28, 28, 28, 28, 28, 28,
28, 28, 28, 28, 28, 28, 28, 28,
28, 28, 28, 28, 28, 28, 28, 28,
28, 28, 28, 28, 28, 28, 28, 28,
28, 28, 28, 28, 28, 28, 28, 28, 

// Carattere 33: '!'
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 34: '"'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 28, 0, 0, 0, 
0, 0, 28, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 35: '#'
0, 0, 28, 0, 28, 0, 0, 0, 
0, 0, 28, 0, 28, 0, 0, 0, 
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 28, 0, 28, 0, 0, 0, 
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 28, 0, 28, 0, 0, 0, 
0, 0, 28, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 36: '$'
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 28, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 28, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0,  
// Carattere 37: '%'
0, 28, 28, 0, 28, 0, 0, 0, 
0, 28, 28, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 28, 28, 0, 0, 
0, 0, 28, 0, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 38: '&'
0, 0, 28, 28, 0, 0, 0, 0, 
0, 28, 0, 0, 28, 0, 0, 0, 
0, 0, 28, 28, 0, 0, 0, 0, 
0, 28, 0, 0, 28, 0, 0, 0, 
0, 28, 0, 0, 28, 0, 0, 0, 
0, 28, 0, 0, 28, 0, 0, 0, 
0, 0, 28, 28, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 39: '''
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 40: '('
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 41: ')'
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 42: '28'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 43: '+'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 44: ','
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
// Carattere 45: '-'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 46: '.'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 47: '/'
0, 0, 0, 0, 0, 0, 28, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 48: '0'
0, 0, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 28, 28, 0, 0, 
0, 28, 0, 28, 0, 28, 0, 0, 
0, 28, 28, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 49: '28'
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 50: '2'
0, 0, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 51: '3'
0, 0, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 52: '4'
0, 0, 0, 0, 28, 28, 0, 0, 
0, 0, 0, 28, 0, 28, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 53: '5'
0, 28, 28, 28, 28, 28, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 54: '6'
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 55: '7'
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 56: '8'
0, 0, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 57: '9'
0, 0, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 28, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 58: ':'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 59: ';'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 60: '<'
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 61: '='
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 62: '>'
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 63: '?'
0, 0, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 64: '@'
0, 0, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 28, 28, 28, 0, 0, 
0, 28, 0, 28, 0, 28, 0, 0, 
0, 28, 0, 28, 28, 28, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 65: 'A'
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 28, 28, 28, 28, 0, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 66: 'B'
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 67: 'C'
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 28, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 28, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 68: 'D'
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 69: 'E'
0, 28, 28, 28, 28, 28, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 70: 'F'
0, 28, 28, 28, 28, 28, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 71: 'G'
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 28, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 28, 28, 28, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 72: 'H'
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 28, 28, 28, 28, 0, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 73: 'I'
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 74: 'J'
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 75: 'K'
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 28, 0, 0, 0, 
0, 28, 0, 28, 0, 0, 0, 0, 
0, 28, 28, 0, 0, 0, 0, 0, 
0, 28, 0, 28, 0, 0, 0, 0, 
0, 28, 0, 0, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 76: 'L'
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 77: 'M'
0, 28, 0, 0, 0, 0, 0, 28, 
0, 28, 28, 0, 0, 0, 28, 28, 
0, 28, 0, 28, 0, 28, 0, 28, 
0, 28, 0, 0, 28, 0, 0, 28, 
0, 28, 0, 0, 0, 0, 0, 28, 
0, 28, 0, 0, 0, 0, 0, 28, 
0, 28, 0, 0, 0, 0, 0, 28, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 78: 'N'
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 28, 0, 0, 0, 28, 0, 
0, 28, 0, 28, 0, 0, 28, 0, 
0, 28, 0, 0, 28, 0, 28, 0, 
0, 28, 0, 0, 0, 28, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 79: 'O'
0, 0, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 80: 'P'
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 81: 'Q'
0, 0, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 28, 0, 28, 0, 0, 
0, 28, 0, 0, 28, 28, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 82: 'R'
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 28, 0, 0, 0, 0, 
0, 28, 0, 0, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 83: 'S'
0, 0, 28, 28, 28, 28, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 84: 'T'
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 85: 'U'
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 86: 'V'
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 87: 'W'
0, 28, 0, 0, 0, 0, 0, 28,
0, 28, 0, 0, 0, 0, 0, 28, 
0, 28, 0, 0, 0, 0, 0, 28, 
0, 28, 0, 0, 28, 0, 0, 28, 
0, 28, 0, 28, 0, 28, 0, 28, 
0, 28, 28, 0, 0, 0, 28, 28, 
0, 28, 0, 0, 0, 0, 0, 28, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 88: 'X'
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 89: 'Y'
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 90: 'Z'
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 91: '['
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 92: '\'
28, 0, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 28, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 93: ']'
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 94: '^'
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 0, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 95: '_'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
28, 28, 28, 28, 28, 28, 28, 28, 
// Carattere 96: '`'
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 97: 'a'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 28, 28, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 98: 'b'
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 28, 28, 0, 0, 0, 
0, 28, 28, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 99: 'c'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 0, 0, 28, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 100: 'd'
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 28, 28, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 101: 'e'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 102: 'f'
0, 0, 0, 0, 28, 28, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 103: 'g'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 0, 0, 0, 
// Carattere 104: 'h'
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 28, 28, 0, 0, 0, 
0, 28, 28, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 105: 'i'
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 106: 'j'
0, 0, 0, 0, 0, 28, 28, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 28, 28, 0, 
0, 0, 0, 0, 0, 28, 28, 0, 
0, 0, 0, 0, 0, 28, 28, 0, 
0, 0, 0, 0, 0, 28, 28, 0, 
0, 0, 28, 0, 0, 28, 28, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
// Carattere 107: 'k'
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 28, 0, 0, 0, 
0, 28, 0, 28, 0, 0, 0, 0, 
0, 28, 28, 0, 0, 0, 0, 0, 
0, 28, 0, 28, 0, 0, 0, 0, 
0, 28, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 108: 'l'
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 109: 'm'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 28, 28, 0, 28, 28, 0, 0, 
0, 28, 0, 28, 0, 0, 28, 0, 
0, 28, 0, 28, 0, 0, 28, 0, 
0, 28, 0, 28, 0, 0, 28, 0, 
0, 28, 0, 28, 0, 0, 28, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 110: 'n'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 111: 'o'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 28, 0, 0, 0, 28, 0, 
0, 0, 28, 0, 0, 0, 28, 0, 
0, 0, 28, 0, 0, 0, 28, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 112: 'p'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 28, 28, 28, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
// Carattere 113: 'q'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
// Carattere 114: 'r'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 28, 28, 0, 0, 0, 
0, 28, 28, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 115: 's'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 28, 28, 0, 
0, 0, 28, 0, 0, 0, 0, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 28, 0, 
0, 28, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 116: 't'
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 28, 0, 
0, 0, 0, 0, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 117: 'u'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 28, 28, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 118: 'v'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 119: 'w'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 0, 28,
0, 28, 0, 0, 0, 0, 0, 28, 
0, 28, 0, 0, 28, 0, 0, 28, 
0, 28, 0, 28, 0, 28, 0, 28, 
0, 0, 28, 0, 0, 0, 28, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 120: 'x'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 121: 'y'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 28, 0, 0, 0, 0, 28, 0, 
0, 0, 28, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
// Carattere 122: 'z'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 28, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 28, 28, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 123: '{'
0, 0, 0, 0, 28, 28, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 28, 28, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 28, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 124: '|'
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 28, 28, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 125: '}'
0, 0, 28, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 28, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 0, 0, 28, 0, 0, 0, 
0, 0, 28, 28, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 126: '~'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 28, 0, 28, 0, 28, 0, 
0, 28, 0, 28, 0, 28, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
// Carattere 127: 'DEL'
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0,};
*/

static uint64_t font[] = {

0x0, /* (space) */

0x808080800080000, /* ! */

0x2828000000000000, /* " */

0x287C287C280000, /* # */

0x81E281C0A3C0800, /* $ */

0x6094681629060000, /* % */

0x1C20201926190000, /* & */

0x808000000000000, /* ' */

0x810202010080000, /* ( */

0x1008040408100000, /* ) */

0x2A1C3E1C2A000000, /* * */

0x8083E08080000, /* + */

0x81000, /* , */

0x3C00000000, /* - */

0x80000, /* . */

0x204081020400000, /* / */

0x1824424224180000, /* 0 */

0x8180808081C0000, /* 1 */

0x3C420418207E0000, /* 2 */

0x3C420418423C0000, /* 3 */

0x81828487C080000, /* 4 */

0x7E407C02423C0000, /* 5 */

0x3C407C42423C0000, /* 6 */

0x7E04081020400000, /* 7 */

0x3C423C42423C0000, /* 8 */

0x3C42423E023C0000, /* 9 */

0x80000080000, /* : */

0x80000081000, /* ; */

0x6186018060000, /* < */

0x7E007E000000, /* = */

0x60180618600000, /* > */

0x3844041800100000, /* ? */

0x3C449C945C201C, /* @ */

0x1818243C42420000, /* A */

0x7844784444780000, /* B */

0x3844808044380000, /* C */

0x7844444444780000, /* D */

0x7C407840407C0000, /* E */

0x7C40784040400000, /* F */

0x3844809C44380000, /* G */

0x42427E4242420000, /* H */

0x3E080808083E0000, /* I */

0x1C04040444380000, /* J */

0x4448507048440000, /* K */

0x40404040407E0000, /* L */

0x4163554941410000, /* M */

0x4262524A46420000, /* N */

0x1C222222221C0000, /* O */

0x7844784040400000, /* P */

0x1C222222221C0200, /* Q */

0x7844785048440000, /* R */

0x1C22100C221C0000, /* S */

0x7F08080808080000, /* T */

0x42424242423C0000, /* U */

0x8142422424180000, /* V */

0x4141495563410000, /* W */

0x4224181824420000, /* X */

0x4122140808080000, /* Y */

0x7E040810207E0000, /* Z */

0x3820202020380000, /* [ */

0x4020100804020000, /* \ */

0x3808080808380000, /* ] */

0x1028000000000000, /* ^ */

0x7E0000, /* _ */

0x1008000000000000, /* ` */

0x3C023E463A0000, /* a */

0x40407C42625C0000, /* b */

0x1C20201C0000, /* c */

0x2023E42463A0000, /* d */

0x3C427E403C0000, /* e */

0x18103810100000, /* f */

0x344C44340438, /* g */

0x2020382424240000, /* h */

0x800080808080000, /* i */

0x800180808080870, /* j */

0x20202428302C0000, /* k */

0x1010101010180000, /* l */

0x665A42420000, /* m */

0x2E3222220000, /* n */

0x3C42423C0000, /* o */

0x5C62427C4040, /* p */

0x3A46423E0202, /* q */

0x2C3220200000, /* r */

0x1C201804380000, /* s */

0x103C1010180000, /* t */

0x2222261A0000, /* u */

0x424224180000, /* v */

0x81815A660000, /* w */

0x422418660000, /* x */

0x422214081060, /* y */

0x3C08103C0000, /* z */

0x1C103030101C0000, /* { */

0x808080808080800, /* | */

0x38080C0C08380000, /* } */

0x324C000000, /* ~ */

0x7E7E7E7E7E7E0000 /* DEL */

};


WORD_ALIGNED_ATTR uint8_t ch_lut[TOTAL_CH][8][8];
uint8_t screen[V_ACTIVE_FRAMES / CHAR_H][H_ACTIVE_FRAMES / CHAR_W]; 
//static uint8_t screen[V_ACTIVE_FRAMES / 16][H_ACTIVE_FRAMES / 8]; ///////////////////////////////////////ricordati

static inline bool is_visible(uint16_t y){
    return (y < V_ACTIVE_FRAMES);
}

static inline bool is_vsync(uint16_t y){
    return (y >= (V_ACTIVE_FRAMES + V_FRONT_PORCH_FRAMES)) && (y < (V_ACTIVE_FRAMES + V_FRONT_PORCH_FRAMES + V_SYNC_PULSE_FRAMES));
}


static void build_lut(void){

    for (int ci = 0; ci < TOTAL_CH; ci++){
        for(int cy = 0; cy < 8; cy++){
            for(int cx = 0; cx < 8; cx++){
                ch_lut[ci][cy][cx] = ((((font[ci] >> (8 * (7 - cy))) & 0xFF) >> (7 - cx)) & 0x1) ? 0b00011111 : 0b00000011;//Font8x8Pixels[((ci*8) + cy)*8 + cx] | H_HIGH_V_HIGH;
            }
        }
    }

}


static void clear_screen(void){
    //for (uint8_t i = 0; i < V_ACTIVE_FRAMES / 16; i++){  //////////////////////////////////////////////////////ricordati
    for (uint8_t i = 0; i < V_ACTIVE_FRAMES / CHAR_H; i++){
        for (uint8_t j = 0; j < H_ACTIVE_FRAMES / CHAR_W; j++){
            screen[i][j] = ' ';
        }
    }
}

static void update_screen(void){
    uint8_t i = 0;
    for (; i < H_ACTIVE_FRAMES / CHAR_W; i++){
        screen[write_on_y][i] = ' ';
    }
    i = 0;
    while (msg[i] != '\0'){
        //if (msg[i] == '\r') break; 
        screen[write_on_y][i] = msg[i];
        i++;
    }
    write_on_y = (write_on_y + 1) % (V_ACTIVE_FRAMES / CHAR_H);
    //write_on_y = (write_on_y + 1) % (V_ACTIVE_FRAMES / 16);
    
}

IRAM_ATTR static void render_line(uint16_t y, uint8_t* dest){
    //uint16_t y_doubled = (y % 2 == 1);
    uint16_t row_y = y / (CHAR_H);
    uint16_t line_pixel_y;

    if (CHAR_H == 16){
        line_pixel_y = (y % CHAR_H) / 2;//((y - y_doubled) % 8) ;
    } else {
        line_pixel_y = (y % CHAR_H);
    }

    //uint16_t line_pixel_x = 0;
    uint8_t *current_dest = dest;
    //const uint8_t PIXEL_ON = 0b00011111;
    //const uint8_t PIXEL_OFF = 0b00000011;

    for (uint8_t row_x = 0; row_x < (H_ACTIVE_FRAMES / CHAR_W); row_x++){

        uint8_t ch = screen[row_y][row_x];
        if (ch < FIRST_CH || ch >= FIRST_CH + TOTAL_CH){
            ch = ' ';
        }
        uint8_t ci = (uint8_t)(ch - FIRST_CH);
        /*
        for (uint8_t pix_char_x = 0; pix_char_x < 8; pix_char_x++){
            dest[line_pixel_x] = (ch_lut[ci][line_pixel_y][pix_char_x]) 
            line_pixel_x++;
        }
            */
        //uint8_t font_slice[] = {ch_lut[ci][line_pixel_y][0], ch_lut[ci][line_pixel_y][0], ch_lut[ci][line_pixel_y][1] , ch_lut[ci][line_pixel_y][1], ch_lut[ci][line_pixel_y][2], ch_lut[ci][line_pixel_y][2],ch_lut[ci][line_pixel_y][3], ch_lut[ci][line_pixel_y][3], ch_lut[ci][line_pixel_y][4], ch_lut[ci][line_pixel_y][4], ch_lut[ci][line_pixel_y][5], ch_lut[ci][line_pixel_y][5], ch_lut[ci][line_pixel_y][6], ch_lut[ci][line_pixel_y][6], ch_lut[ci][line_pixel_y][7], ch_lut[ci][line_pixel_y][7]};
                                    

        //memcpy(current_dest, font_slice, CHAR_W);
        uint8_t* font_row = ch_lut[ci][line_pixel_y];

        //uint8_t font_row = ( font[ci] >> (8 * (7 - line_pixel_y)) ) & 0xFF;


        //uint8_t color;

        if (CHAR_H == 16){
            
            current_dest[0] = font_row[1];
            current_dest[1] = font_row[1];
            current_dest[2] = font_row[0];
            current_dest[3] = font_row[0];
            current_dest[4] = font_row[3];
            current_dest[5] = font_row[3];
            current_dest[6] = font_row[2];
            current_dest[7] = font_row[2];
            current_dest[8] = font_row[5];
            current_dest[9] = font_row[5];
            current_dest[10] = font_row[4];
            current_dest[11] = font_row[4];
            current_dest[12] = font_row[7];
            current_dest[13] = font_row[7];
            current_dest[14] = font_row[6];
            current_dest[15] = font_row[6];
            /*
            color = ((font_row >> 6) & 0x01) ? PIXEL_ON : PIXEL_OFF;
            current_dest[0] = color;
            current_dest[1] = color;
            color = ((font_row >> 7) & 0x01) ? PIXEL_ON : PIXEL_OFF;
            current_dest[2] = color;
            current_dest[3] = color;


            color = ((font_row >> 4) & 0x01) ? PIXEL_ON : PIXEL_OFF;
            current_dest[4] = color;
            current_dest[5] = color;
            color = ((font_row >> 5) & 0x01) ? PIXEL_ON : PIXEL_OFF;
            current_dest[6] = color;
            current_dest[7] = color;

            color = ((font_row >> 2) & 0x01) ? PIXEL_ON : PIXEL_OFF;
            current_dest[8] = color;
            current_dest[9] = color;
            color = ((font_row >> 3) & 0x01) ? PIXEL_ON : PIXEL_OFF;
            current_dest[10] = color;
            current_dest[11] = color;


            color = ((font_row >> 0) & 0x01) ? PIXEL_ON : PIXEL_OFF;
            current_dest[12] = color;
            current_dest[13] = color;
            color = ((font_row >> 1) & 0x01) ? PIXEL_ON : PIXEL_OFF;
            current_dest[14] = color;
            current_dest[15] = color;
            */

        } else {
            current_dest[0] = font_row[2];
            current_dest[1] = font_row[3];
            current_dest[2] = font_row[0];
            current_dest[3] = font_row[1];
            current_dest[4] = font_row[6];
            current_dest[5] = font_row[7];
            current_dest[6] = font_row[4];
            current_dest[7] = font_row[5];
        }
        
        
        current_dest += CHAR_W;
    }
}


void main_vga_task(void *arg){
    /*
    TaskHandle_t idle_task_core1 = xTaskGetIdleTaskHandleForCore(1);

    if (idle_task_core1 != NULL) {
        esp_task_wdt_delete(idle_task_core1);
    }

    esp_task_wdt_add(NULL);
    */
    build_lut();
    clear_screen();

    uint8_t update_pending = false;
    //int64_t last_vsync_time = 0;
    //int64_t current_vsync_time = 0;
    while (true){

        //update_pending = true;
        
        if (xSemaphoreTake(msg_ready, 0) == pdTRUE){
            update_screen();
            update_pending = true;
        }

        if (update_pending){
            if (xSemaphoreTake(display_done, 0) == pdTRUE){
                
                //current_vsync_time = esp_timer_get_time();
                //ESP_LOGI(VGA_TASK_TAG, "Current time: %lld microsecondi", 
                //             current_vsync_time);
                /*
                if (last_vsync_time != 0) {
                    int64_t frame_duration_us = current_vsync_time - last_vsync_time;
                    
                    
                    ESP_LOGI(VGA_TASK_TAG, "Durata V-sync: %lld microsecondi (%.2f ms)", 
                             frame_duration_us, frame_duration_us / 1000.0);
                }

                
                last_vsync_time = current_vsync_time;
                */
                xSemaphoreGive(uart_send_avail);
                update_pending = false;
            }
            
        }
        xSemaphoreTake(line_ready, portMAX_DELAY);
        //vTaskSuspendAll();


        //uint16_t next_line = (current_y_line + 1) % 525;
        uint16_t next_line_2 = (current_y_line + 1) % TOTAL_V_FRAMES;
        //uint16_t next_line_2 = (current_y_line + 2) % TOTAL_V_FRAMES;

        
        
        uint8_t *dest = (uint8_t*) fill_next;

        if (is_visible(next_line_2)){ //&& len > 0){

            //render_char(next_line_fill, dst);
            render_line(next_line_2, dest);


        } else {

            //memset(dest, is_vsync(next_line_2)? H_HIGH_V_LOW : H_HIGH_V_HIGH, H_ACTIVE_FRAMES);
            memcpy(dest, is_vsync(next_line_2)? black_lineL : black_lineH, H_ACTIVE_FRAMES);

        }
        //xTaskResumeAll();
        /*
        if (++last_delay >= 512){
            last_delay = 0;
            //vTaskDelay(0);
            //esp_task_wdt_reset();
        }
        */
        
    }
}

void vga_start(void){

    
    

    init_sem();
    start_buffer_i2s();
    uart_start();
    //xTaskCreatePinnedToCore(screen_update_task, "screen_update", 4096, NULL, 10, NULL, 1);
    vTaskDelay(10/portTICK_PERIOD_MS);
    xTaskCreatePinnedToCore(main_vga_task, "render", 8192, NULL, 10, NULL, 1);
    //AO
    i2s_start();
    vTaskDelete(NULL);
    
}